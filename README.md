# Phase 2 L1 Calo Analyzer

## Setup

Set up `CMSSW_11_1_7` (use in conjunction with https://github.com/skkwan/cmssw/blob/devel-Phase2RCTCluster/L1Trigger/L1CaloTrigger/plugins/) and clone this repo in `CMSSW_11_1_7/src/L1Trigger/`.

## Each time you run...

1. Make sure the `L1Trigger/L1CaloTrigger` area is compiled, since this analyzer loads and calls the modules from that area.

   Fun facts:
   If analyzing the CMSSW emulator, make sure the `python/` config file uses the `L1EGamma`... cluster collection.
   If analyzing the firmware-based emulator, make sure the `python/` config file uses the `Phase2L1EGamma`... cluster collection.
(Otherwise the clusters won't show up)

3. To call the original CMSSW emulator and make an n-tuple from that,
   ```
   cmsenv
   cmsRun test-l1t-cmssw-EventDisplayGenerator.py
   ```

   To call the firmware-based emulator and make an n-tuple from that,
   ```
   cmsenv
   cmsRun test-l1tEventDisplayGenerator.py   
   ```

4. The firmware-based (original CMSSW) emulator creates these outputs: 
    * `L1EventDisplay.root` (`L1EventDisplay-cmssw.root`) - this should be used in the event display code
    * `.txt` printouts specified in the `L1Trigger/L1CaloTrigger` plugins scripts) - helpful for info/debugging
    * `phase2L1CaloEGamma.root` (`cmsswCaloEGamma.root`): the outputs generated by the `L1Trigger/L1CaloTrigger` plugins scripts) - can ignore

5. Copy the `L1EventDisplay` ROOT files into the event display repo: https://github.com/skkwan/phase2-l1t-eventDisplay and proceed there

